<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSP Component Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0%25' stop-color='%2360a5fa'/%3E%3Cstop offset='50%25' stop-color='%23a78bfa'/%3E%3Cstop offset='100%25' stop-color='%23f472b6'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='32' height='32' rx='7' fill='%230a0a0f'/%3E%3Cline x1='8' y1='10' x2='16' y2='16' stroke='url(%23g)' stroke-width='2' stroke-linecap='round'/%3E%3Cline x1='8' y1='22' x2='16' y2='16' stroke='url(%23g)' stroke-width='2' stroke-linecap='round'/%3E%3Cline x1='16' y1='16' x2='24' y2='16' stroke='url(%23g)' stroke-width='2' stroke-linecap='round'/%3E%3Ccircle cx='8' cy='10' r='3' fill='url(%23g)'/%3E%3Ccircle cx='8' cy='22' r='3' fill='url(%23g)'/%3E%3Ccircle cx='16' cy='16' r='3.5' fill='url(%23g)'/%3E%3Ccircle cx='24' cy='16' r='3' fill='url(%23g)'/%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            900: '#0a0a0f',
                            800: '#12121a',
                            700: '#1a1a24',
                            600: '#22222e',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .glass-hover:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.12);
        }
        .version-pill.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3), 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }
        /* Dev pills: dim when inactive, bright with ring when active */
        .version-pill.dev-main:not(.active),
        .version-pill.dev-next:not(.active) {
            opacity: 0.6;
            filter: saturate(0.7);
        }
        .version-pill.dev-main.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 1;
            filter: saturate(1);
        }
        .version-pill.dev-next.active {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 1;
            filter: saturate(1);
        }
        .stale-badge {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        }
        .cve-badge-critical {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
        }
        .cve-badge-high {
            background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
        }
        .cve-badge-medium {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
        }
        .cve-badge-low {
            background: linear-gradient(135deg, #65a30d 0%, #4d7c0f 100%);
        }
        .cve-badge-unknown {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        }
        .mismatch-badge {
            background: rgba(255, 255, 255, 0.2);
        }
        .support-full {
            background: #22c55e;
            color: white;
        }
        .support-maintenance {
            background: #eab308;
            color: black;
        }
        .support-security {
            background: #f97316;
            color: white;
        }
        .support-unsupported {
            background: #6b7280;
            color: white;
            opacity: 0.7;
        }
        .support-upcoming {
            background: #3b82f6;
            color: white;
        }
        .version-pill.dev-main {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .version-pill.dev-next {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        }
        .deps-toggle {
            cursor: pointer;
            user-select: none;
        }
        .deps-toggle:hover {
            color: #60a5fa;
        }
        .deps-row.hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-dark-900 text-gray-100 min-h-screen">
    <!-- Background gradient -->
    <div class="fixed inset-0 bg-gradient-to-br from-blue-900/20 via-purple-900/10 to-dark-900 pointer-events-none"></div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2">
                OSP Component Dashboard
            </h1>
            <p class="text-gray-400">OpenShift Pipelines version tracking</p>
        </header>

        <!-- Version Selector -->
        <div class="flex flex-col items-center gap-4 mb-6">
            <!-- Development versions (main/next) - shown first as primary options -->
            <div class="flex items-center gap-4">
                <span class="text-xs text-gray-500 uppercase tracking-wide">Development</span>
                <div class="flex gap-3">
                    {% for version in versions %}
                    {% if version == 'next' %}
                    <button
                        class="version-pill dev-next px-6 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 text-white"
                        onclick="showVersion('{{ version }}')"
                        data-version="{{ version }}"
                    >
                        üöÄ next
                        <span class="ml-1 text-xs opacity-75">(latest releases)</span>
                        {% if version_stats[version].has_go_mismatch or version_stats[version].has_dep_mismatch %}
                        <span class="ml-1 text-yellow-200">‚ö†</span>
                        {% endif %}
                    </button>
                    {% elif version == 'main' %}
                    <button
                        class="version-pill dev-main px-6 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 text-white"
                        onclick="showVersion('{{ version }}')"
                        data-version="{{ version }}"
                    >
                        üå± main
                        <span class="ml-1 text-xs opacity-75">(bleeding edge)</span>
                        {% if version_stats[version].has_go_mismatch or version_stats[version].has_dep_mismatch %}
                        <span class="ml-1 text-yellow-200">‚ö†</span>
                        {% endif %}
                    </button>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            <!-- Release versions -->
            <div class="flex items-center gap-4">
                <span class="text-xs text-gray-500 uppercase tracking-wide">Releases</span>
                <div class="flex flex-wrap gap-3">
                    {% for version in versions %}
                    {% if version not in ['main', 'next'] %}
                    <button
                        class="version-pill px-6 py-2 rounded-full glass text-sm font-medium transition-all duration-200 hover:scale-105 text-gray-300 hover:text-white {% if support_status[version] == 'unsupported' %}opacity-50{% endif %}"
                        onclick="showVersion('{{ version }}')"
                        data-version="{{ version }}"
                    >
                        OSP {{ version }}
                        {% if support_status[version] %}
                        <span class="ml-1.5 w-2.5 h-2.5 rounded-full inline-block support-{{ support_status[version] }}" title="{% if support_status[version] == 'full' %}Full Support{% elif support_status[version] == 'maintenance' %}Maintenance{% elif support_status[version] == 'security' %}Security Only{% elif support_status[version] == 'unsupported' %}End of Life{% elif support_status[version] == 'upcoming' %}Upcoming{% endif %}"></span>
                        {% endif %}
                        {% if version_stats[version].has_go_mismatch or version_stats[version].has_dep_mismatch %}
                        <span class="ml-1 text-yellow-400" title="{% if version_stats[version].has_go_mismatch %}Go version mismatch{% endif %}{% if version_stats[version].has_go_mismatch and version_stats[version].has_dep_mismatch %}, {% endif %}{% if version_stats[version].has_dep_mismatch %}Dependency version mismatch{% endif %}">‚ö†</span>
                        {% endif %}
                        {% if version_stats[version].total_cves > 0 %}
                        <span class="ml-1 text-red-400" title="{{ version_stats[version].total_cves }} CVE(s) affecting this version">üõ°</span>
                        {% endif %}
                    </button>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>


        <!-- Component Cards Container -->
        {% for version in versions %}
        <div
            id="version-{{ version }}"
            class="version-content hidden"
        >
            <!-- Version-level status ribbon -->
            {% set has_issues = version_stats[version].has_go_mismatch or version_stats[version].has_dep_mismatch or version_stats[version].total_cves > 0 or version_stats[version].total_dep_cves > 0 or version_stats[version].has_vuln_data %}
            {% if has_issues %}
            <div class="mb-6 p-4 rounded-lg bg-amber-500/10 border border-amber-500/30 space-y-2">
                {% if version_stats[version].has_go_mismatch %}
                <div class="flex items-center gap-2 text-sm">
                    <span class="text-yellow-400 text-lg">‚ö†</span>
                    <span class="text-yellow-400 font-medium">Go mismatch:</span>
                    <span class="text-yellow-300">{{ version_stats[version].go_versions | join(', ') }}</span>
                </div>
                {% endif %}

                {% if version_stats[version].has_dep_mismatch %}
                <div class="flex items-center gap-2 text-sm">
                    <span class="text-yellow-400 text-lg">‚ö†</span>
                    <span class="text-yellow-400 font-medium">Dep mismatch:</span>
                    <span class="text-yellow-300">{{ version_stats[version].mismatched_deps | join(', ') }}</span>
                </div>
                {% endif %}

                {% if version_stats[version].total_cves > 0 %}
                <div class="flex items-center gap-2 text-sm flex-wrap">
                    <span class="text-red-400 text-lg">üõ°</span>
                    <span class="text-red-400 font-medium">Component CVEs:</span>
                    {% for cve in version_stats[version].cve_details %}
                    <a href="{{ cve.url }}" target="_blank" class="text-red-300 hover:text-red-200">{{ cve.id }} ({{ cve.component }})</a>{% if not loop.last %}<span class="text-gray-600">,</span>{% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                {% if version_stats[version].total_dep_cves > 0 %}
                <div class="flex items-center gap-2 text-sm flex-wrap">
                    <span class="text-red-400 text-lg">üõ°</span>
                    <span class="text-red-400 font-medium">Dependency CVEs:</span>
                    {% for cve in version_stats[version].dep_cve_details %}
                    <a href="{{ cve.url }}" target="_blank" class="text-red-300 hover:text-red-200">{{ cve.id }} ({{ cve.dep }})</a>{% if not loop.last %}<span class="text-gray-600">,</span>{% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                {% if version_stats[version].has_vuln_data %}
                <div class="flex items-center gap-2 text-sm flex-wrap">
                    <span class="text-purple-400 text-lg">üîç</span>
                    {% if version_stats[version].total_vulns > 0 %}
                    <span class="text-purple-400 font-medium">govulncheck ({{ version_stats[version].called_vulns }} called / {{ version_stats[version].total_vulns }} total):</span>
                    {% for vuln in version_stats[version].vuln_details[:10] %}
                    <span class="{% if vuln.is_called %}text-red-300{% else %}text-purple-300{% endif %}">{{ vuln.id }} ({{ vuln.component }}{% if vuln.is_called %} ‚ö°{% endif %})</span>{% if not loop.last %}<span class="text-gray-600">,</span>{% endif %}
                    {% endfor %}
                    {% if version_stats[version].vuln_details | length > 10 %}
                    <span class="text-gray-500">... +{{ version_stats[version].vuln_details | length - 10 }} more</span>
                    {% endif %}
                    {% else %}
                    <span class="text-green-400 font-medium">govulncheck: 0 reachable vulnerabilities ‚úì</span>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endif %}

            <!-- Table View -->
            <div class="table-view overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-white/10">
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Component</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Ref</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Tag</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Release</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Runtime</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Stale Deps</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">Mismatched Deps</th>
                            <th class="text-left py-3 px-4 text-gray-400 font-medium">CVEs</th>
                            <th class="text-right py-3 px-4 text-gray-400 font-medium">Deps</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for comp in versions_data[version] %}
                        <tr class="border-b border-white/5 hover:bg-white/5 transition-colors">
                            <td class="py-3 px-4">
                                <a href="https://github.com/{{ comp.owner }}/{{ comp.repo }}" target="_blank" class="text-white hover:text-blue-400 transition-colors {% if comp.is_primary %}font-bold{% else %}font-medium{% endif %}">
                                    {{ comp.repo }}
                                </a>
                            </td>
                            <td class="py-3 px-4">
                                <span class="px-2 py-0.5 rounded bg-blue-500/20 text-blue-300 font-mono text-xs font-medium">
                                    {{ comp.ref }}
                                </span>
                            </td>
                            <td class="py-3 px-4">
                                {% if comp.tag_version and comp.tag_version != comp.ref %}
                                <span class="font-mono text-xs text-green-300">{{ comp.tag_version }}</span>
                                {% elif comp.ref.startswith('v') %}
                                <span class="font-mono text-xs text-gray-400">{{ comp.ref }}</span>
                                {% else %}
                                <span class="text-gray-600 text-xs">-</span>
                                {% endif %}
                            </td>
                            <td class="py-3 px-4">
                                {% if not comp.release_status.branch_exists %}
                                <span class="text-gray-600 text-xs">n/a</span>
                                {% elif comp.release_status.update_available %}
                                <span class="text-orange-400 font-mono text-xs" title="Update available on {{ comp.release_status.branch_name }}">
                                    ‚Üí {{ comp.release_status.latest_version }}
                                </span>
                                {% elif comp.release_status.has_unreleased %}
                                <span class="text-yellow-400 text-xs" title="{{ comp.release_status.commits_ahead }} commits on {{ comp.release_status.branch_name }} since {{ comp.release_status.current_version }}">
                                    +{{ comp.release_status.commits_ahead }} ahead
                                </span>
                                {% else %}
                                <span class="text-green-500 text-xs">‚úì</span>
                                {% endif %}
                            </td>
                            <td class="py-3 px-4">
                                {% if comp.language == 'npm' %}
                                <span class="text-green-300 font-mono text-xs" title="Node.js{% if comp.package_manager %} ({{ comp.package_manager }}){% endif %}">
                                    <span class="text-green-500">Node</span> {{ comp.node_version or '?' }}
                                </span>
                                {% else %}
                                <span class="{% if comp.go_version_mismatch %}text-yellow-400{% else %}text-gray-200{% endif %} font-mono text-xs">
                                    {{ comp.go_version }}{% if comp.go_version_mismatch %} ‚ö†{% endif %}
                                </span>
                                {% endif %}
                            </td>
                            <td class="py-3 px-4">
                                {% set stale_deps = comp.internal_deps | selectattr('is_stale') | list %}
                                {% if stale_deps %}
                                <div class="flex flex-wrap gap-x-3 gap-y-1">
                                    {% for dep in stale_deps %}
                                    <span class="font-mono text-xs" title="{{ dep.path }} (bundled: {{ dep.bundled_version }})">
                                        <span class="text-orange-300">{{ dep.path.split('/')[-1] }}</span><span class="text-orange-500">@{{ dep.version }}</span>
                                    </span>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <span class="text-gray-600">-</span>
                                {% endif %}
                            </td>
                            <td class="py-3 px-4">
                                {% set mismatched_deps = comp.external_deps | selectattr('version_differs') | list %}
                                {% if mismatched_deps %}
                                <div class="flex flex-wrap gap-x-3 gap-y-1">
                                    {% for dep in mismatched_deps %}
                                    <span class="font-mono text-xs" title="{{ dep.path }} (expected: {{ dep.expected_version }})">
                                        {% if comp.language == 'npm' %}
                                        <span class="text-yellow-300">{{ dep.path.split('/')[-1] }}</span><span class="text-yellow-500">@{{ dep.version }}</span>
                                        {% else %}
                                        <span class="text-gray-300">{{ dep.path.split('/')[-1] }}</span><span class="text-gray-400">@{{ dep.version }}</span>
                                        {% endif %}
                                    </span>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <span class="text-gray-600">-</span>
                                {% endif %}
                            </td>
                            <td class="py-3 px-4">
                                {% set ns = namespace(has_cves=false, has_vulns=false, has_npm_vulns=false) %}
                                {% for dep in comp.external_deps %}{% if dep.cves %}{% set ns.has_cves = true %}{% endif %}{% endfor %}
                                {% if comp.vulns %}{% set ns.has_vulns = true %}{% endif %}
                                {% if comp.npm_vulns %}{% set ns.has_npm_vulns = true %}{% endif %}
                                {% if ns.has_cves or ns.has_vulns or ns.has_npm_vulns or comp.cves %}
                                <div class="flex flex-wrap gap-x-2 gap-y-1">
                                    {# Component CVEs from GitHub Advisory #}
                                    {% for cve in comp.cves %}
                                    <a href="{{ cve.url }}" target="_blank" class="inline-flex items-center gap-1 font-mono text-xs" title="{{ cve.id }}: {{ cve.summary }}">
                                        <span class="px-1 py-0.5 rounded bg-red-500/20 text-red-300">GH</span>
                                        <span class="text-red-400">{{ cve.id }}</span>
                                    </a>
                                    {% endfor %}
                                    {# Dependency CVEs from GitHub Advisory #}
                                    {% for dep in comp.external_deps %}
                                    {% if dep.cves %}
                                    {% for cve in dep.cves %}
                                    <a href="{{ cve.url }}" target="_blank" class="inline-flex items-center gap-1 font-mono text-xs" title="{{ cve.id }} in {{ dep.path }}">
                                        <span class="px-1 py-0.5 rounded bg-red-500/20 text-red-300">GH</span>
                                        <span class="text-red-400">{{ dep.path.split('/')[-1] }}</span>
                                    </a>
                                    {% endfor %}
                                    {% endif %}
                                    {% endfor %}
                                    {# Vulns from govulncheck #}
                                    {% for vuln in comp.vulns %}
                                    <span class="inline-flex items-center gap-1 font-mono text-xs" title="{{ vuln.id }}: {{ vuln.summary }}{% if vuln.is_called %} (CALLED){% endif %}">
                                        <span class="px-1 py-0.5 rounded {% if vuln.is_called %}bg-purple-500/30 text-purple-200{% else %}bg-purple-500/20 text-purple-300{% endif %}">VC{% if vuln.is_called %}!{% endif %}</span>
                                        <span class="{% if vuln.is_called %}text-purple-200{% else %}text-purple-400{% endif %}">{{ vuln.module }}</span>
                                    </span>
                                    {% endfor %}
                                    {# Vulns from npm audit #}
                                    {% for vuln in comp.npm_vulns %}
                                    <span class="inline-flex items-center gap-1 font-mono text-xs" title="{{ vuln.id }}: {{ vuln.title }} ({{ vuln.severity }}){% if vuln.is_direct %} [DIRECT]{% endif %}">
                                        <span class="px-1 py-0.5 rounded {% if vuln.is_direct %}bg-green-500/30 text-green-200{% else %}bg-green-500/20 text-green-300{% endif %}">NA{% if vuln.is_direct %}!{% endif %}</span>
                                        <span class="{% if vuln.is_direct %}text-green-200{% else %}text-green-400{% endif %}">{{ vuln.package }}</span>
                                    </span>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <span class="text-gray-600">-</span>
                                {% endif %}
                            </td>
                            <td class="py-3 px-4 text-right">
                                <span class="deps-toggle text-gray-400 hover:text-blue-400" onclick="toggleDeps('{{ version }}-{{ comp.repo }}')" title="Click to show all dependencies">
                                    {{ comp.total_deps }} ‚ñº
                                </span>
                            </td>
                        </tr>
                        <!-- Expandable dependencies row -->
                        <tr id="deps-{{ version }}-{{ comp.repo }}" class="deps-row hidden bg-dark-800/50">
                            <td colspan="8" class="py-3 px-4">
                                <div class="grid grid-cols-2 gap-4">
                                    {% if comp.internal_deps %}
                                    <div>
                                        <p class="text-xs text-orange-400 uppercase tracking-wider mb-2">Tekton Dependencies</p>
                                        <div class="space-y-1">
                                            {% for dep in comp.internal_deps %}
                                            <div class="flex justify-between text-xs">
                                                <span class="{% if dep.is_stale %}text-red-300{% else %}text-orange-200{% endif %} truncate" title="{{ dep.path }}">
                                                    {{ dep.path.split('/')[-1] }}
                                                </span>
                                                <span class="{% if dep.is_stale %}text-red-400{% else %}text-orange-400{% endif %} font-mono">
                                                    {{ dep.version }}{% if dep.is_stale %} (stale){% endif %}
                                                </span>
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    {% endif %}
                                    {% if comp.external_deps %}
                                    <div>
                                        <p class="text-xs text-purple-400 uppercase tracking-wider mb-2">External Dependencies</p>
                                        <div class="space-y-1">
                                            {% for dep in comp.external_deps %}
                                            <div class="flex justify-between text-xs">
                                                <span class="{% if dep.cves %}text-red-300{% elif dep.version_differs %}text-yellow-300{% else %}text-gray-300{% endif %} truncate" title="{{ dep.path }}">
                                                    {{ dep.path.split('/')[-1] }}
                                                </span>
                                                <span class="{% if dep.cves %}text-red-400{% elif dep.version_differs %}text-yellow-400{% else %}text-purple-400{% endif %} font-mono">
                                                    {{ dep.version }}{% if dep.version_differs %} (exp: {{ dep.expected_version }}){% endif %}
                                                </span>
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endfor %}

        <!-- Legend -->
        <div class="mt-16 glass rounded-xl p-6">
            <h3 class="text-lg font-semibold text-white mb-4">Column Reference</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-sm">
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Tag</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="text-green-300 font-mono">v0.78.2</span> ‚Äî Resolved tag from branch ref</div>
                        <div><span class="text-gray-400 font-mono">v0.62.0</span> ‚Äî Tag ref (same as ref)</div>
                        <div><span class="text-gray-600">-</span> ‚Äî No tag (e.g., main branch)</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Release</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="text-green-500">‚úì</span> ‚Äî Up to date with release branch</div>
                        <div><span class="text-orange-400">‚Üí vX.Y.Z</span> ‚Äî Newer patch version available</div>
                        <div><span class="text-yellow-400">+N ahead</span> ‚Äî Unreleased commits on branch</div>
                        <div><span class="text-gray-600">n/a</span> ‚Äî No release branch found</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Runtime</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="text-gray-200">1.24.0</span> ‚Äî Go version used</div>
                        <div><span class="text-yellow-400">1.24.0 ‚ö†</span> ‚Äî Different from other components</div>
                        <div><span class="text-green-500">Node</span> <span class="text-green-300">20.x</span> ‚Äî npm component (Node.js)</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Stale Deps</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="text-orange-300">pipeline</span><span class="text-orange-500">@v1.5.0</span> ‚Äî Uses older version than bundled in release</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Mismatched Deps</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="text-gray-300">client-go</span><span class="text-gray-400">@v0.30.0</span> ‚Äî Go: Different version than other components</div>
                        <div><span class="text-yellow-300">react</span><span class="text-yellow-500">@^17.0.1</span> ‚Äî npm: Outdated vs npm registry (major version behind)</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">CVEs</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="px-1 py-0.5 rounded bg-red-500/20 text-red-300 text-xs">GH</span> ‚Äî GitHub Advisory (may not be exploitable)</div>
                        <div><span class="px-1 py-0.5 rounded bg-purple-500/20 text-purple-300 text-xs">VC</span> ‚Äî govulncheck detected (not called)</div>
                        <div><span class="px-1 py-0.5 rounded bg-purple-500/30 text-purple-200 text-xs">VC!</span> ‚Äî govulncheck (called, action required)</div>
                        <div><span class="px-1 py-0.5 rounded bg-green-500/20 text-green-300 text-xs">NA</span> ‚Äî npm audit (transitive)</div>
                        <div><span class="px-1 py-0.5 rounded bg-green-500/30 text-green-200 text-xs">NA!</span> ‚Äî npm audit (direct dep, action required)</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Deps</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div>Total dependency count. Click to expand.</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-gray-300 font-medium mb-2">Support Status</h4>
                    <div class="space-y-1.5 text-gray-400">
                        <div><span class="w-2.5 h-2.5 rounded-full inline-block support-full"></span> ‚Äî Full support</div>
                        <div><span class="w-2.5 h-2.5 rounded-full inline-block support-maintenance"></span> ‚Äî Maintenance only</div>
                        <div><span class="w-2.5 h-2.5 rounded-full inline-block support-security"></span> ‚Äî Security fixes only</div>
                        <div><span class="w-2.5 h-2.5 rounded-full inline-block support-unsupported"></span> ‚Äî End of life</div>
                        <div><span class="w-2.5 h-2.5 rounded-full inline-block support-upcoming"></span> ‚Äî Upcoming release</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center mt-8 space-y-3">
            <p class="text-gray-400 text-sm">
                Vibed with <span class="text-pink-400">‚ô•</span> by
                <a href="https://github.com/vdemeester" class="bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent hover:from-purple-400 hover:to-pink-400 transition-all">@vdemeester</a>
            </p>
            <p class="text-gray-600 text-xs">
                <a href="https://github.com/openshift-pipelines/osp-component-dashboard" class="hover:text-blue-400 transition-colors">Source</a>
                <span class="mx-2 text-gray-700">¬∑</span>
                <a href="https://github.com/openshift-pipelines" class="hover:text-purple-400 transition-colors">OpenShift Pipelines</a>
            </p>
        </footer>
    </div>

    <script>

        function showVersion(version, updateHash = true) {
            // Hide all version content
            document.querySelectorAll('.version-content').forEach(el => {
                el.classList.add('hidden');
            });

            // Show selected version content
            document.getElementById('version-' + version).classList.remove('hidden');

            // Update pill styles - handle both regular and dev pills
            document.querySelectorAll('.version-pill').forEach(pill => {
                const isDevPill = pill.classList.contains('dev-main') || pill.classList.contains('dev-next');
                if (pill.dataset.version === version) {
                    pill.classList.add('active');
                    if (!isDevPill) {
                        pill.classList.add('text-white');
                        pill.classList.remove('text-gray-300');
                    }
                } else {
                    pill.classList.remove('active');
                    if (!isDevPill) {
                        pill.classList.remove('text-white');
                        pill.classList.add('text-gray-300');
                    }
                }
            });

            // Update URL hash for shareable links
            if (updateHash && window.location.hash !== '#' + version) {
                history.replaceState(null, '', '#' + version);
            }
        }

        function toggleDeps(id) {
            const row = document.getElementById('deps-' + id);
            const toggle = event.target;
            if (row.classList.contains('hidden')) {
                row.classList.remove('hidden');
                toggle.textContent = toggle.textContent.replace('‚ñº', '‚ñ≤');
            } else {
                row.classList.add('hidden');
                toggle.textContent = toggle.textContent.replace('‚ñ≤', '‚ñº');
            }
        }

        // Get version from URL hash or default
        function getVersionFromHash(versions) {
            const hash = window.location.hash.slice(1); // Remove '#'
            return versions.includes(hash) ? hash : null;
        }

        // On page load, use hash or default to 'next' version
        document.addEventListener('DOMContentLoaded', function() {
            const versions = [{% for v in versions %}'{{ v }}'{% if not loop.last %}, {% endif %}{% endfor %}];
            const hashVersion = getVersionFromHash(versions);
            const defaultVersion = versions.includes('next') ? 'next' : versions[0];
            showVersion(hashVersion || defaultVersion, !hashVersion);
        });

        // Handle browser back/forward navigation
        window.addEventListener('hashchange', function() {
            const versions = [{% for v in versions %}'{{ v }}'{% if not loop.last %}, {% endif %}{% endfor %}];
            const hashVersion = getVersionFromHash(versions);
            if (hashVersion) {
                showVersion(hashVersion, false);
            }
        });
    </script>
</body>
</html>
